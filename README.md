         
# Калькулятор оптимизации характеристик для Path of Exile 2

## Описание проекта

Данный проект представляет собой инструмент для оптимизации характеристик персонажа в игре Path of Exile 2 путем подбора оптимальной комбинации колец и амулетов. Программа анализирует предметы бижутерии из текстового файла и находит наилучшую комбинацию, максимизирующую общий "счет" характеристик персонажа.

## Функциональные возможности

- Парсинг данных о предметах бижутерии из текстового файла
- Анализ и учет всех характеристик предметов, включая implicit модификаторы
- Автоматический подбор оптимальной комбинации из двух колец и одного амулета
- Настраиваемая система весов для различных характеристик в зависимости от билда персонажа
- Вывод детальной информации о выбранных предметах и итоговых характеристиках

## Структура проекта

### Основные классы

#### CharacterStats
Класс для хранения и управления характеристиками персонажа. Поддерживает следующие характеристики:
- **Базовые атрибуты**: сила, ловкость, интеллект
- **Защитные характеристики**: здоровье, энергетический щит, мана, дух, броня, уклонение, блок
- **Сопротивления**: огонь, молния, холод, хаос
- **Боевые характеристики**: меткость, физический урон, урон от огня
- **Регенерация**: восстановление здоровья, маны
- **Похищение**: похищение здоровья и маны
- **Прочие**: повышение редкости предметов, процент уклонения

Методы класса:
- `add_stats(other)`: сложение характеристик с другим объектом CharacterStats
- `__str__()`: строковое представление ненулевых характеристик

#### JewelryItem
Класс для представления предметов бижутерии (колец и амулетов). Содержит следующие атрибуты:
- `name`: название предмета
- `item_type`: тип предмета ("ring" или "amulet")
- `rarity`: редкость предмета
- `level`: уровень предмета
- `required_level`: требуемый уровень персонажа
- `stats`: обычные модификаторы (объект CharacterStats)
- `implicit_stats`: implicit модификаторы (объект CharacterStats)

Метод `__str__()` обеспечивает удобное строковое представление предмета.

### Основные функции

#### parse_jewelry_file(filename)
Функция для парсинга файла с данными о предметах бижутерии. Обрабатывает текстовый файл, разделяя его на блоки по пустым строкам, и извлекает информацию о каждом предмете.

Процесс парсинга включает:
- Определение класса предмета (кольцо или амулет)
- Извлечение редкости, названия и типа предмета
- Определение требуемого уровня и уровня предмета
- Парсинг implicit и обычных модификаторов

#### parse_stat_line(line, stats)
Функция для парсинга строки с характеристикой и добавления её в объект stats. Поддерживает различные типы модификаторов:
- Сопротивления стихиям
- Базовые характеристики (сила, ловкость, интеллект)
- Здоровье и мана
- Меткость и уклонение
- Редкость предметов
- Регенерация здоровья и маны
- Физический урон и урон от огня
- Похищение здоровья и маны

#### find_optimal_combination(jewelry_items)
Функция для нахождения оптимальной комбинации колец и амулета. Перебирает все возможные комбинации из двух колец и одного амулета, вычисляет общий "счет" для каждой комбинации и выбирает лучшую.

#### calculate_score(stats)
Функция для вычисления общего "счета" для набора характеристик. Использует систему весов для разных характеристик, которую можно настроить в зависимости от билда персонажа.

#### main()
Основная функция программы, которая:
- Загружает данные о предметах из файла
- Выводит информацию о загруженных предметах
- Находит оптимальную комбинацию
- Выводит результаты

## Формат входного файла

Программа ожидает текстовый файл с информацией о предметах бижутерии в следующем формате:

```
Класс предмета: Кольца
Редкость: Редкий
[Название предмета] [Тип кольца]
--------
Уровень предмета: [число]
Требуется: Уровень [число]
--------
[Модификатор] (implicit)
--------
[Модификатор 1]
[Модификатор 2]
...
[Модификатор N]

```

Блоки предметов разделяются пустой строкой.

## Настройка весов характеристик

Для настройки приоритетов различных характеристик можно изменить словарь `weights` в функции `calculate_score()`. По умолчанию наибольший вес имеют сопротивления стихиям (5.0), ловкость (3.0), здоровье, дух и уклонение (2.0).

## Использование

1. Подготовьте текстовый файл с информацией о предметах бижутерии в требуемом формате
2. Укажите имя файла в переменной `filename` в функции `main()`
3. Запустите программу: `python main.py`
4. Программа выведет оптимальную комбинацию предметов и итоговые характеристики

## Пример вывода

```
Калькулятор оптимизации характеристик для Path of Exile 2
============================================================
Чтение данных из файла 1.txt...
Загружено 10 предметов:
- Кольца: 7
- Амулеты: 3

Оптимальная комбинация:
============================================================
Ring: Кольцо Бури
Ring: Кольцо Хаоса
Amulet: Амулет Силы

Итоговые характеристики:
============================================================
Strength: 25
Dexterity: 15
Intelligence: 10
Health: 45
Fire resistance: 30
Lightning resistance: 25
Cold resistance: 15
Chaos resistance: 20
```

## Требования

- Python 3.6 или выше
- Стандартные библиотеки Python: itertools, re, dataclasses, typing

## Дальнейшее развитие

Возможные направления для улучшения проекта:
- Добавление поддержки других типов предметов (оружие, броня)
- Реализация графического интерфейса
- Добавление возможности сохранения и загрузки различных наборов весов для разных билдов
- Интеграция с API игры для автоматического получения данных о предметах
- Добавление возможности учета требований к характеристикам для экипировки предметов

        
